<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"  
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"  
    xmlns:context="http://www.springframework.org/schema/context"  
    xsi:schemaLocation="  
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd  
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd  
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd  
       ">  
 

 
<!-- 建立数据源 -->
<bean id="c3p0" class="com.mchange.v2.c3p0.ComboPooledDataSource">
       <property name="driverClass" value="com.mysql.jdbc.Driver"></property>
		<property name="jdbcUrl" value="jdbc:mysql://localhost:3306/kekebookstore"></property>
		<property name="user" value="keke"></property>
		<property name="password" value="root"></property>
		
		<property name="acquireIncrement" value="5"></property>
		<property name="initialPoolSize" value="10"></property>
		<property name="minPoolSize" value="5"></property>
		<property name="maxPoolSize" value="20"></property> 

		<property name="maxStatements" value="0"></property>
		<property name="maxStatementsPerConnection" value="5"></property> 

		
</bean>
<!-- 把数据源注入给Session工厂 -->
<bean id="sessionFactory"
   class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
   <property name="dataSource">
    <ref bean="c3p0" />
   </property>
   <property name="configLocations">
    <list>
     <value>classpath:hibernate.cfg.xml</value>
    </list>
   </property>  
</bean>

 
<!-- 把DAO注入给Session工厂 -->
<bean id="userdao" class="dao.Userdao">
   <property name="sessionFactory">
    	<ref bean="sessionFactory" />
   </property>
</bean>

<bean id="userService" class="service.Service">
   <property name="userdao" ref="userdao" />
</bean>
<bean id="client.LoginAction" class="client.LoginAction" scope="prototype">
   <property name="service" ref="userService" />

</bean>
</beans>
